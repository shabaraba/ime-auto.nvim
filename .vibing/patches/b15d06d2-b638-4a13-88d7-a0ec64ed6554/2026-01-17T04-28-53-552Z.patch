diff --git a/lua/ime-auto/init.lua b/lua/ime-auto/init.lua
index e210333..9189b13 100644
--- a/lua/ime-auto/init.lua
+++ b/lua/ime-auto/init.lua
@@ -121,59 +121,60 @@ local function create_commands()
       return
     end
 
-    -- Create display items
-    local items = {}
-    for _, source in ipairs(sources) do
-      table.insert(items, source.name)
+    -- Create display list for inputlist
+    local display_list = {"Step 1/2: Select English input source (0 to cancel):"}
+    for i, source in ipairs(sources) do
+      table.insert(display_list, string.format("%d. %s", i, source.name))
     end
 
     -- First selection: English input
-    vim.ui.select(items, {
-      prompt = "Step 1/2: Select English input source:",
-    }, function(en_choice, en_idx)
-      if not en_choice or not en_idx then
-        vim.notify("[ime-auto] Setup cancelled", vim.log.levels.WARN)
-        return
-      end
+    local en_idx = vim.fn.inputlist(display_list)
+
+    if en_idx == 0 or en_idx > #sources then
+      vim.notify("[ime-auto] Setup cancelled", vim.log.levels.WARN)
+      return
+    end
 
-      local en_selected = sources[en_idx]
-      M.config.set_input_source_en(en_selected.id)
-      vim.notify(string.format("[ime-auto] English input: %s", en_selected.id), vim.log.levels.INFO)
-
-      -- Step 2: Select Japanese input source (only for macism/im-select)
-      if config_opts.macos_ime_tool == "macime" then
-        -- macime doesn't need Japanese input configuration
-        local ok, path = M.config.save_input_sources()
-        if ok then
-          vim.notify(string.format("[ime-auto] Setup complete! Configuration saved to:\n%s\n\nmacime will automatically save and restore your Japanese IME.", path), vim.log.levels.INFO)
-        else
-          vim.notify("[ime-auto] Failed to save configuration: " .. path, vim.log.levels.ERROR)
-        end
-        return
+    local en_selected = sources[en_idx]
+    M.config.set_input_source_en(en_selected.id)
+    vim.notify(string.format("[ime-auto] English input: %s", en_selected.id), vim.log.levels.INFO)
+
+    -- Step 2: Select Japanese input source (only for macism/im-select)
+    if config_opts.macos_ime_tool == "macime" then
+      -- macime doesn't need Japanese input configuration
+      local ok, path = M.config.save_input_sources()
+      if ok then
+        vim.notify(string.format("[ime-auto] Setup complete! Configuration saved to:\n%s\n\nmacime will automatically save and restore your Japanese IME.", path), vim.log.levels.INFO)
+      else
+        vim.notify("[ime-auto] Failed to save configuration: " .. path, vim.log.levels.ERROR)
       end
+      return
+    end
+
+    -- For macism/im-select, ask for Japanese input
+    local ja_display_list = {"Step 2/2: Select Japanese input source (0 to cancel):"}
+    for i, source in ipairs(sources) do
+      table.insert(ja_display_list, string.format("%d. %s", i, source.name))
+    end
 
-      -- For macism/im-select, ask for Japanese input
-      vim.ui.select(items, {
-        prompt = "Step 2/2: Select Japanese input source:",
-      }, function(ja_choice, ja_idx)
-        if not ja_choice or not ja_idx then
-          vim.notify("[ime-auto] Setup cancelled (Japanese input not selected)", vim.log.levels.WARN)
-          return
-        end
-
-        local ja_selected = sources[ja_idx]
-        M.config.set_input_source_ja(ja_selected.id)
-        vim.notify(string.format("[ime-auto] Japanese input: %s", ja_selected.id), vim.log.levels.INFO)
-
-        -- Save configuration
-        local ok, path = M.config.save_input_sources()
-        if ok then
-          vim.notify(string.format("[ime-auto] Setup complete! Configuration saved to:\n%s", path), vim.log.levels.INFO)
-        else
-          vim.notify("[ime-auto] Failed to save configuration: " .. path, vim.log.levels.ERROR)
-        end
-      end)
-    end)
+    local ja_idx = vim.fn.inputlist(ja_display_list)
+
+    if ja_idx == 0 or ja_idx > #sources then
+      vim.notify("[ime-auto] Setup cancelled (Japanese input not selected)", vim.log.levels.WARN)
+      return
+    end
+
+    local ja_selected = sources[ja_idx]
+    M.config.set_input_source_ja(ja_selected.id)
+    vim.notify(string.format("[ime-auto] Japanese input: %s", ja_selected.id), vim.log.levels.INFO)
+
+    -- Save configuration
+    local ok, path = M.config.save_input_sources()
+    if ok then
+      vim.notify(string.format("[ime-auto] Setup complete! Configuration saved to:\n%s", path), vim.log.levels.INFO)
+    else
+      vim.notify("[ime-auto] Failed to save configuration: " .. path, vim.log.levels.ERROR)
+    end
   end, { desc = "Setup input sources interactively (macOS only)" })
 end
